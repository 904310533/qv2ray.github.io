<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Manual | Qv2ray</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/logo.svg">
    <meta name="description" content="Make v2ray real cross-platform">
    <link rel="preload" href="/assets/css/0.styles.f2d91595.css" as="style"><link rel="preload" href="/assets/js/app.62dbaeb7.js" as="script"><link rel="preload" href="/assets/js/3.b5cf6559.js" as="script"><link rel="preload" href="/assets/js/23.b5d3144c.js" as="script"><link rel="preload" href="/assets/js/8.960df767.js" as="script"><link rel="prefetch" href="/assets/js/10.73f77b10.js"><link rel="prefetch" href="/assets/js/11.5d07c23e.js"><link rel="prefetch" href="/assets/js/12.91ec3ef4.js"><link rel="prefetch" href="/assets/js/13.a2ea84fb.js"><link rel="prefetch" href="/assets/js/14.5c35d335.js"><link rel="prefetch" href="/assets/js/15.d49a54de.js"><link rel="prefetch" href="/assets/js/16.c70a3ccd.js"><link rel="prefetch" href="/assets/js/17.47ad875d.js"><link rel="prefetch" href="/assets/js/18.e36eca96.js"><link rel="prefetch" href="/assets/js/19.54145ab3.js"><link rel="prefetch" href="/assets/js/20.d9b2494f.js"><link rel="prefetch" href="/assets/js/21.71cfc993.js"><link rel="prefetch" href="/assets/js/22.91caeae5.js"><link rel="prefetch" href="/assets/js/24.d6d29f12.js"><link rel="prefetch" href="/assets/js/25.8ef7663c.js"><link rel="prefetch" href="/assets/js/26.dc8c67fa.js"><link rel="prefetch" href="/assets/js/27.fc39fd99.js"><link rel="prefetch" href="/assets/js/28.b3c29d6c.js"><link rel="prefetch" href="/assets/js/29.5523c82a.js"><link rel="prefetch" href="/assets/js/30.664c8b6a.js"><link rel="prefetch" href="/assets/js/31.ae62a419.js"><link rel="prefetch" href="/assets/js/32.1235e128.js"><link rel="prefetch" href="/assets/js/33.57f1f84f.js"><link rel="prefetch" href="/assets/js/34.cf1231d6.js"><link rel="prefetch" href="/assets/js/35.32d71465.js"><link rel="prefetch" href="/assets/js/36.c4cb58a7.js"><link rel="prefetch" href="/assets/js/37.a37bbf33.js"><link rel="prefetch" href="/assets/js/38.361c00de.js"><link rel="prefetch" href="/assets/js/39.87b6f05e.js"><link rel="prefetch" href="/assets/js/4.ef0bb0f6.js"><link rel="prefetch" href="/assets/js/40.267b3501.js"><link rel="prefetch" href="/assets/js/41.f22175e2.js"><link rel="prefetch" href="/assets/js/42.56f86c5f.js"><link rel="prefetch" href="/assets/js/43.b9ee84b3.js"><link rel="prefetch" href="/assets/js/44.43fcd803.js"><link rel="prefetch" href="/assets/js/45.e3182be1.js"><link rel="prefetch" href="/assets/js/46.97622140.js"><link rel="prefetch" href="/assets/js/5.d4abafcd.js"><link rel="prefetch" href="/assets/js/6.3072bd07.js"><link rel="prefetch" href="/assets/js/7.80a4bf1a.js"><link rel="prefetch" href="/assets/js/9.65d4f5b5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.33b3cf02.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f2d91595.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/logo.svg" alt="Qv2ray" class="logo"> <span class="site-name can-hide">Qv2ray</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/en/manual/" class="nav-link">
  Manual
</a></div><div class="nav-item"><a href="/en/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/en/hacking/" class="nav-link">
  Hacking
</a></div><div class="nav-item"><a href="/en/plugins/" class="nav-link">
  Plugin System
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/manual.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  ÁÆÄ‰Ωì‰∏≠Êñá
</a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/Qv2ray/Qv2ray" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/en/manual/" class="nav-link">
  Manual
</a></div><div class="nav-item"><a href="/en/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/en/hacking/" class="nav-link">
  Hacking
</a></div><div class="nav-item"><a href="/en/plugins/" class="nav-link">
  Plugin System
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/manual.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  ÁÆÄ‰Ωì‰∏≠Êñá
</a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/Qv2ray/Qv2ray" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="manual"><a href="#manual" class="header-anchor">#</a> Manual</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This part is translated by a non-native speaker of Chinese. Corrections welcome!</p></div> <h2 id="general-settings"><a href="#general-settings" class="header-anchor">#</a> General Settings</h2> <p>General Settings are for Qv2ray itself, including appearance, behavior and network settings.</p> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>The general settings will only change the behavior of Qv2ray itself, but will not affect the proxying behavior of the V2Ray Core.</p></div> <h3 id="appearance"><a href="#appearance" class="header-anchor">#</a> Appearance</h3> <p>Set how Qv2ray looks and feels.</p> <ul><li><strong>Recent Jumplist</strong>: Set the number of recently used connections displayed in the notification icon right-click menu-recent connections list.</li> <li><strong>Maximum log lines</strong>: Set the upper limit of the number of log records in the <strong>Log</strong> pane on the right side of the Qv2ray main interface. After the set value is exceeded, the older logs will be purged automatically.</li> <li><strong>Others</strong>: Set up as you like~ü§ê</li></ul> <h3 id="behavior"><a href="#behavior" class="header-anchor">#</a> Behavior</h3> <p>Set the behavior of Qv2ray.</p> <ul><li><strong>Quiet Mode</strong>: When enabled, Qv2ray will not actively pop up any notifications.</li> <li><strong>Others</strong>: It's already very simple, why should I talk about it? üò∂</li></ul> <h3 id="network-settings"><a href="#network-settings" class="header-anchor">#</a> Network Settings</h3> <p>Set the way Qv2ray accesses the network.</p> <ul><li><strong>Latency Testing Method</strong>: Set the test method for node delay.
<ul><li><strong>TCPing</strong>: Qv2ray's default delay test method. The test result is closer to the actual user experience, but the node based on the mKCP protocol cannot be tested, since it's based on UDP instead of TCP.</li> <li><strong>ICMPing</strong>: The delay test method based on ICMP / UDP protocol is currently recognized and mainstream delay test method on the market, and it is also the test principle of ping command in Windows and Unix systems. The test result is much lower than TCPing and far better than the actual experience. It can be used to test nodes based on mKCP protocol.</li></ul></li> <li><strong>User Agent</strong>: The client information declared by Qv2ray when making network requests. If you do not understand what UA is, please do not change this setting.</li> <li><strong>Qv2ray Proxy</strong>: The proxy settings used by Qv2ray when making network requests, not the proxy settings used by V2Ray Core for network traffic.</li></ul> <div class="custom-block tip"><p class="custom-block-title">What is Qv2ray proxy?</p> <p>If you want Qv2ray to update subscriptions or detect version updates through a proxy, please configure this.</p> <p>If you want the traffic proxied by V2Ray to pass through another proxy, or your network needs to pass through a layer of proxy to connect to the Internet, then please use the Forward Proxy function and do not configure this option.</p></div> <p>#Advanced Behavior
Set the advanced behavior of Qv2ray. Please note that abuse of these settings may have negative effects!</p> <p>Default setting AllowInsecure: All new connections imported via subscription / QR code / VMess protocol link will be enabled by default to allow insecure certificates. Enabling this setting will cause the relevant nodes to lose TLS protection, and there is a risk of man in the middle attacks. Nodes added by manually filling in connection properties or editing JSON are not affected by this option. If you do not understand the actual use of this option, please do not open it!</p> <p>The default setting AllowInsecureCiphers: All new connections imported through subscription / QR code / VMess protocol link will be enabled by default to allow insecure TLS algorithm option. Enabling this setting will cause related nodes to lose TLS protection, and there is a risk of man-in-the-middle attacks. Nodes added by manually filling in connection properties or editing JSON are not affected by this option. If you do not understand the actual use of this option, please do not open it!</p> <p>Timed test delay: After enabling this option, Qv2ray will periodically test the delay of the currently connected node. Enabling this option may make it easier for GFW to recognize your connection.</p> <p>Another Re-emphasis:</p> <p>Misuse of the above settings may cause negative effects and even lead to security issues! If you do not understand the actual use of these options, please do not open them!</p> <p>For versions below V2ray-Core 4.23.1</p> <p>Update 2020-05-30: Due to implementation flaws, V2ray-Core will use a hard-coded TLS cipher suite list when the AllowInsecureCiphers option is not turned on. This will cause V2ray-Core's TLS traffic to have obvious characteristics. Enabling AllowInsecureCiphers in Qv2ray will Temporarily alleviate this problem, you need to re-import all affected connections after turning on this option</p> <p>===
Part Two:</p> <p>#Advanced routing settings
Advanced routing settings and the routing editor are distinctive features of Qv2ray. With their functionality, you can achieve precise control of traffic, such as on-demand proxy, domestic and foreign distribution, etc., and even do Matryoshkas ü§£~</p> <p>Let‚Äôs discuss routing. This concerns the PAC and GFWList.</p> <p>If you don't know what the routing function of V2Ray is, then you can understand it as a new generation PAC implementation with simpler configuration, more efficient use, and better rules.</p> <p>The routing function is far more powerful than PAC, so please don't ask whether Qv2ray supports PAC! The data used by the routing function is more complete than GFWList, so GFWList is no longer needed.</p> <p>#Global routing rules
The global routing rule configuration function is in the Advanced Routing Settings tab of Preferences.</p> <p>#Domain strategy
Contains three types: AsIs, IPIfNonMatch, and IPOnDemand.</p> <p>According to V2Ray's official documents, the meaning of the three domain name strategies are as follows:</p> <p>AsIs: Use only the domain name for routing. Defaults.
IPIfNonMatch: When the domain name does not match any rules, the domain name is resolved into IP (A record or AAAA record) for matching again:
When a domain name has multiple A records, it will try to match all A records until one of them matches a certain rule;
The resolved IP only works during routing, and the original domain name is still used in the forwarded data packets.
IPOnDemand: When any IP-based rules are encountered during matching, the domain name will be immediately resolved to IP for matching.
In short, based on a developer‚Äôs statement:</p> <p>AsIs: fast analysis, imprecise diversion;
IPIfNonMatch: parsing is slightly slower, and shunt is accurate
IPOnDemand: Useless.
Author's Note: IPOnDemand should be the slowest but most accurate, but in most cases, IPIfNonMatch is sufficient, so the actual effect of IPOnDemand is not obvious.</p> <p>You can choose the corresponding domain name strategy according to your actual needs. Generally speaking, IPIfNonMatch is the ideal choice in most situations.</p> <p>#Route plan
The routing plan consists of a 3x2 matrix, from top left to bottom right: IP direct connection, IP proxy, IP blocking, domain name direct connection, domain name proxy, domain name blocking, one per line, no comma separation.</p> <p>These 6 rules in Qv2ray are matched according to the priority of domain name blocking -&gt; domain name proxy -&gt; domain name direct connection -&gt; IP blocking -&gt; IP proxy -&gt; IP direct connection. If the match fails, the private address and the mainland China domestic address are directly connected, otherwise the agent will be used.</p> <p>I just want a global agent~~~ ü§ó</p> <p>It's very simple. Just clear these rules, go to the Connection tab of Preferences, and uncheck the Bypass China check box. üôÑ</p> <p>According to the official V2Ray documentation:</p> <p>The IP rules are written as follows (in order of common usage):</p> <p>GeoIP: The form is geoip:cn, which must start with geoip: (all lowercase) followed by a two-character country code. For example, geoip:cn represents an IP address in China, and geoip:us represents an IP address in the United States.
Special value: geoip:private, including all private addresses, such as 127.0.0.1 (this rule only supports V2Ray 3.5 and above).
IP: The format is 127.0.0.1.
CIDR: The format is 10.0.0.0/8.
Load IP rules from external files: the form is ext:file:tag, which must start with ext: (all lowercase), followed by the file name (without extension) file and tag, the file must be stored in the V2Ray core resource directory. The file format is the same as geoip.dat, and the specified tag must exist in the file.</p> <p>The domain name rules are written as follows (in order of common use):</p> <p>A list of predefined domain names:</p> <p>Starts with geosite:, and the rest is a name, such as geosite:google or geosite:cn. For the name and domain name list, please refer to the predefined domain name list.</p> <p>Subdomain: Starts with domain:, and the rest is a domain name. This rule takes effect when the domain name is the target domain name or its subdomain name. For example, domain:v2ray.com matches www.v2ray.com and v2ray.com, but not xv2ray.com.</p> <p>Complete match: Starts with full:, and the rest is a domain name. When this domain name completely matches the target domain name, the rule takes effect. For example, full:v2ray.com matches v2ray.com but not www.v2ray.com.</p> <p>Pure string: When this string matches any part of the target domain name, the rule takes effect. For example, sina.com can match sina.com, sina.com.cn and www.sina.com, but not sina.cn.</p> <p>Regular expression: Starts with regexp:, and the rest is a regular expression. When this regular expression matches the target domain name, the rule takes effect. For example, regexp:\.goo.*\.com$ matches www.google.com, fonts.googleapis.com, but not google.com.</p> <p>Rules for loading domain names from external files: the format is ext:file:tag, which must start with ext: (all lowercase), followed by the file name (without extension) file and tag, and the file must be stored in the V2Ray core resource directory. The file format is the same as geosite.dat, and the specified tag must exist in the file.</p> <p>If you want to implement a global proxy, that is, regardless of the destination address, all traffic will go through the proxy, then refer to the other tips above. üòÖ
If you want to achieve precise diversion, that is, all outbound traffic should go through the proxy, then just click the preset plan button in the interface, select the blank plan or the ad blocking plan, and set the domain name strategy to IPIfNonMatch. .üòã</p> <p>Suppose you need more precise diversion rules! ü§î</p> <p>Then the author recommends the enhanced version of the V2Ray rules file project. The warehouse address is Loyalsoldier/v2ray-rules-dat. ü§ó</p> <p>Suppose you need highly customizable diversion rules! ü§™</p> <p>Please refer to the next section Routing Editor. üòÑ</p> <p>#Routing editor
In the main interface of Qv2ray, right-click the agent node and select Edit as a complex configuration to open the Route Editor interface.</p> <p>In this interface, you can arbitrarily combine matching conditions such as user, source IP, target IP, domain name, target domain name, protocol, and port to create sufficiently accurate inbound/outbound rules, and you can also adjust the priority of the rules arbitrarily Level, even achieve load balancing.</p> <p>What needs reiterating is that the matching conditions in each routing rule are and / and / &amp;&amp; relationships, that is, if a routing rule contains multiple matching conditions, the actual matching conditions finally obtained are the intersection of these conditions. For example, if a routing rule contains both the port condition 443 and the target domain name condition qv2ray.github.io, then only the target qv2ray.github.io:443 that meets both conditions will match this item rule.</p> <p>If you don't know much about V2Ray's routing rules mechanism, please refer to V2Ray's official documentation.</p> <p>END</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Qv2ray/qv2ray.github.io/edit/source/docs/en/manual.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/2/2020, 12:34:34 AM</span></div></footer> <!----> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/assets/js/app.62dbaeb7.js" defer></script><script src="/assets/js/3.b5cf6559.js" defer></script><script src="/assets/js/23.b5d3144c.js" defer></script><script src="/assets/js/8.960df767.js" defer></script>
  </body>
</html>
